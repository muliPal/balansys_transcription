<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="balansys.css" />
    <title>Balansys</title>
  </head>
  <body>
    <div class="menu">
      <h1>Balansys Transcription</h1>
    </div>
    <div class="view">
      <div class="select">
        <fieldset>
          <legend>Select_file</legend>
          <input type="radio" />from_folder
          <br />
          <button>choose_file</button>
          <br />
          <input type="radio" />from_database
          <br />
          <button>Select</button>
        </fieldset>
      </div>
      <!-- rename the class to image from content-avoid confusion from content id and content class-->
      <div class="image">
        <!-- add the pic class -->
        <img id="receipt" class="pic" alt="bmj" src="./bmj.jpg"/>
      </div>
    </div>
    <div id="content">
      <table id="table_data">
        <tr bgcolor="grey">
          <th>Date</th>
          <th>Invoice_No</th>
          <th>Source</th>
          <th>Item</th>
          <th>Unit</th>
          <th>Quantity</th>
          <th>Amount</th>
        </tr>
        <tr bgcolor="lightgrey">
          <td>19/10/2023</td>
          <td>1948414</td>
          <td>Destiny_Best_supermarket</td>
          <td>Destiny_White_Bread</td>
          <td>800g</td>
          <td>1</td>
          <td>110</td>
        </tr>
        <tr bgcolor="lightgrey">
          <td>19/10/2023</td>
          <td>1948414</td>
          <td>Destiny_Best_supermarket</td>
          <td>Bella_Jumbo_Roll</td>
          <td>1</td>
          <td>1</td>
          <td>125</td>
        </tr>
        <tr bgcolor="lightgrey">
          <td>19/10/2023</td>
          <td>1948414</td>
          <td>Destiny_Best_supermarket</td>
          <td>Destiny_Brown_Bread</td>
          <td>800g</td>
          <td>1</td>
          <td>110</td>
        </tr>
      </table>
      <button id="add_new_button">Add_Row</button>
      <button onclick="save_data()">Save</button>
    </div>
    <footer class="foot">
      <p>Developed by Benard muli</p>
    </footer>
    <script>
      // ------------------------------------------------------------------------
      //                      Adding new row and saving data
      // ------------------------------------------------------------------------
      const balansys_table = document.getElementById("table_data");
      const new_row_button = document.getElementById("add_new_button");
      const data = [];
      //
      // Adding new row to table
      new_row_button.addEventListener('click', () => {
          // 
          // Create a new row template
          const new_row =
              `
                  <tr id="transcription_data">
                      <td><input type="text"></td>
                      <td><input type="text"></td>
                      <td><input type="text"></td>
                      <td><input type="text"></td>
                      <td><input type="text"></td>
                      <td><input type="text"></td>
                  </tr>
          `;
          //
          // Add the tr fragment to the table.
          balansys_table.innerHTML += new_row;
      });
      //
      // Save data from the input box then display on the table
      function save_data() {
        const inputFields = document.getElementsByClassName('input-data');
        const rowData = [];
        //
        // Get the data from the input boxes.
        for (let i = 0; i < inputFields.length; i++) {
            rowData.push(inputFields[i].value);
        }
        //
        // Display the data in the table.
        data.push(rowData); // Store the data in the 'data' array
        updateTable();
      };

      function updateTable() {
        // balansys_table.innerHTML = ''; // Clear the table

        data.forEach(rowData => {
            const newRow = document.createElement('tr');

            rowData.forEach(value => {
                const newCell = document.createElement('td');
                newCell.textContent = value;
                newRow.appendChild(newCell);
            });

            balansys_table.appendChild(newRow);
        });
      }
    </script>
  </body>
</html>
